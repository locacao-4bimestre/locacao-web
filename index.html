<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sistema de Locação de Veículos</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #255000 0%, #588100 100%);
            min-height: 100vh;
            color: #333;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 20px;
        }

        header {
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
        }

        .header-content {
            padding: 20px;
            text-align: center;
        }

        h1 {
            color: #4a5568;
            margin-bottom: 10px;
            font-size: 2.5em;
            background: linear-gradient(45deg, #255000, #8db600);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
        }

        .subtitle {
            color: #6b7280;
            font-size: 1.1em;
        }

        nav {
            background: rgba(255, 255, 255, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 12px;
            margin-bottom: 30px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
        }

        .nav-buttons {
            display: flex;
            justify-content: center;
            flex-wrap: wrap;
            gap: 15px;
            padding: 20px;
        }

        .nav-btn {
            background: linear-gradient(45deg, #255000, #8db600);
            color: white;
            border: none;
            padding: 12px 24px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(37, 80, 0, 0.4);
        }

        .nav-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 80, 0, 0.6);
        }

        .nav-btn.active {
            background: linear-gradient(45deg, #8db600, #255000);
            transform: translateY(-1px);
        }

        .section {
            display: none;
            background: rgba(255, 255, 255, 0.95);
            backdrop-filter: blur(10px);
            border-radius: 15px;
            padding: 30px;
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.1);
            margin-bottom: 30px;
        }

        .section.active {
            display: block;
            animation: fadeInUp 0.5s ease;
        }

        @keyframes fadeInUp {
            from {
                opacity: 0;
                transform: translateY(30px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .section h2 {
            color: #4a5568;
            margin-bottom: 25px;
            font-size: 1.8em;
            border-bottom: 3px solid #255000;
            padding-bottom: 10px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #4a5568;
        }

        input, select {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid #e2e8f0;
            border-radius: 8px;
            font-size: 16px;
            transition: all 0.3s ease;
            background: white;
        }

        input:focus, select:focus {
            outline: none;
            border-color: #255000;
            box-shadow: 0 0 0 3px rgba(37, 80, 0, 0.1);
        }

        .btn {
            background: linear-gradient(45deg, #255000, #8db600);
            color: white;
            border: none;
            padding: 12px 30px;
            border-radius: 25px;
            cursor: pointer;
            font-size: 16px;
            font-weight: 600;
            transition: all 0.3s ease;
            margin: 10px 5px;
            box-shadow: 0 4px 15px rgba(37, 80, 0, 0.4);
        }

        .btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 20px rgba(37, 80, 0, 0.6);
        }

        .btn-secondary {
            background: linear-gradient(45deg, #718096, #4a5568);
            box-shadow: 0 4px 15px rgba(113, 128, 150, 0.4);
        }

        .btn-secondary:hover {
            box-shadow: 0 6px 20px rgba(113, 128, 150, 0.6);
        }

        .form-row {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 20px;
        }

        .vehicle-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
            margin-top: 25px;
        }

        .vehicle-card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 16px rgba(0, 0, 0, 0.1);
            transition: all 0.3s ease;
            border: 2px solid transparent;
        }

        .vehicle-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.15);
        }

        .vehicle-card.disponivel {
            border-color: #8db600;
            background: linear-gradient(135deg, #f0fff4 0%, #e6f9d5 100%);
        }

        .vehicle-card.alugado {
            border-color: #ff9800;
            background: linear-gradient(135deg, #fff8e1 0%, #ffcc80 100%);
        }

        .vehicle-status {
            display: inline-block;
            padding: 6px 12px;
            border-radius: 15px;
            font-size: 12px;
            font-weight: bold;
            text-transform: uppercase;
            margin-bottom: 10px;
        }

        .status-disponivel {
            background: #8db600;
            color: white;
        }

        .status-alugado {
            background: #ff9800;
            color: white;
        }

        .vehicle-info {
            margin-bottom: 15px;
        }

        .vehicle-info h3 {
            color: #2d3748;
            margin-bottom: 8px;
        }

        .vehicle-details {
            color: #4a5568;
            font-size: 14px;
            line-height: 1.4;
        }

        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(5px);
            z-index: 1000;
        }

        .modal-content {
            background: white;
            margin: 50px auto;
            padding: 30px;
            border-radius: 15px;
            width: 90%;
            max-width: 500px;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3);
            animation: modalSlideIn 0.3s ease;
        }

        @keyframes modalSlideIn {
            from {
                opacity: 0;
                transform: translateY(-50px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        .close {
            color: #aaa;
            float: right;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            line-height: 1;
        }

        .close:hover {
            color: #000;
        }

        .alert {
            padding: 15px;
            border-radius: 8px;
            margin: 15px 0;
            font-weight: 500;
        }

        .alert-success {
            background: #d4edda;
            color: #155724;
            border: 1px solid #c3e6cb;
        }

        .alert-error {
            background: #f8d7da;
            color: #721c24;
            border: 1px solid #f5c6cb;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .stat-card {
            background: linear-gradient(135deg, #255000 0%, #8db600 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 16px rgba(37, 80, 0, 0.4);
        }

        .stat-number {
            font-size: 2.5em;
            font-weight: bold;
            margin-bottom: 5px;
        }

        .stat-label {
            font-size: 0.9em;
            opacity: 0.9;
        }

        @media (max-width: 768px) {
            .container {
                padding: 10px;
            }

            .nav-buttons {
                flex-direction: column;
            }

            .form-row {
                grid-template-columns: 1fr;
            }

            .vehicle-grid {
                grid-template-columns: 1fr;
            }

            h1 {
                font-size: 2em;
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <div class="header-content">
                <h1>🚗 Sistema de Locação de Veículos</h1>
                <p class="subtitle">Gerencie sua frota de veículos com facilidade</p>
            </div>
        </header>

        <nav>
            <div class="nav-buttons">
                <button class="nav-btn active" onclick="showSection('dashboard')">📊 Dashboard</button>
                <button class="nav-btn" onclick="showSection('clientes')">👥 Clientes</button>
                <button class="nav-btn" onclick="showSection('veiculos')">🚗 Veículos</button>
                <button class="nav-btn" onclick="showSection('frota')">📋 Visualizar Frota</button>
            </div>
        </nav>

        <!-- Dashboard -->
        <section id="dashboard" class="section active">
            <h2>📊 Dashboard</h2>
            <div class="stats-grid">
                <div class="stat-card">
                    <div class="stat-number" id="totalVeiculos">0</div>
                    <div class="stat-label">Total de Veículos</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="veiculosDisponiveis">0</div>
                    <div class="stat-label">Veículos Disponíveis</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="veiculosAlugados">0</div>
                    <div class="stat-label">Veículos Alugados</div>
                </div>
                <div class="stat-card">
                    <div class="stat-number" id="totalClientes">0</div>
                    <div class="stat-label">Total de Clientes</div>
                </div>
            </div>
        </section>

        <!-- Seção de Clientes -->
        <section id="clientes" class="section">
            <h2>👥 Cadastro de Clientes</h2>
            
            <form id="clienteForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="nomeCliente">Nome Completo:</label>
                        <input type="text" id="nomeCliente" required>
                    </div>
                    <div class="form-group">
                        <label for="cpfCliente">CPF:</label>
                        <input type="text" id="cpfCliente" required maxlength="14" placeholder="000.000.000-00">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="emailCliente">Email:</label>
                        <input type="email" id="emailCliente" required>
                    </div>
                    <div class="form-group">
                        <label for="telefoneCliente">Telefone:</label>
                        <input type="tel" id="telefoneCliente" required placeholder="(00) 00000-0000">
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="enderecoCliente">Endereço:</label>
                        <input type="text" id="enderecoCliente" required>
                    </div>
                    <div class="form-group">
                        <label for="cnhCliente">CNH:</label>
                        <input type="text" id="cnhCliente" required>
                    </div>
                </div>
                
                <button type="submit" class="btn">💾 Cadastrar Cliente</button>
                <button type="button" class="btn btn-secondary" onclick="limparFormularioCliente()">🔄 Limpar</button>
            </form>
        </section>

        <!-- Seção de Veículos -->
        <section id="veiculos" class="section">
            <h2>🚗 Cadastro de Veículos</h2>
            
            <form id="veiculoForm">
                <div class="form-row">
                    <div class="form-group">
                        <label for="marcaVeiculo">Marca:</label>
                        <input type="text" id="marcaVeiculo" required>
                    </div>
                    <div class="form-group">
                        <label for="modeloVeiculo">Modelo:</label>
                        <input type="text" id="modeloVeiculo" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="anoVeiculo">Ano:</label>
                        <input type="number" id="anoVeiculo" required min="1990" max="2025">
                    </div>
                    <div class="form-group">
                        <label for="corVeiculo">Cor:</label>
                        <input type="text" id="corVeiculo" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="placaVeiculo">Placa:</label>
                        <input type="text" id="placaVeiculo" required maxlength="8" placeholder="ABC-1234">
                    </div>
                    <div class="form-group">
                        <label for="valorDiaria">Valor da Diária (R$):</label>
                        <input type="number" id="valorDiaria" required step="0.01" min="0">
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="tipoVeiculo">Tipo de Veículo:</label>
                    <select id="tipoVeiculo" required>
                        <option value="">Selecione o tipo</option>
                        <option value="hatch">Hatch</option>
                        <option value="sedan">Sedan</option>
                        <option value="suv">SUV</option>
                        <option value="pickup">Pickup</option>
                        <option value="conversivel">Conversível</option>
                        <option value="van">Van</option>
                    </select>
                </div>
                
                <button type="submit" class="btn">💾 Cadastrar Veículo</button>
                <button type="button" class="btn btn-secondary" onclick="limparFormularioVeiculo()">🔄 Limpar</button>
            </form>
        </section>

        <!-- Seção de Visualização da Frota -->
        <section id="frota" class="section">
            <h2>📋 Frota de Veículos</h2>
            
            <div style="margin-bottom: 20px;">
                <label for="filtroStatus">Filtrar por status:</label>
                <select id="filtroStatus" onchange="filtrarVeiculos()">
                    <option value="">Todos</option>
                    <option value="disponivel">Disponíveis</option>
                    <option value="alugado">Alugados</option>
                </select>
            </div>
            
            <div id="listaVeiculos" class="vehicle-grid">
                <!-- Veículos serão adicionados aqui dinamicamente -->
            </div>
        </section>
    </div>

    <!-- Modal de Locação -->
    <div id="modalLocacao" class="modal">
        <div class="modal-content">
            <span class="close" onclick="fecharModal()">&times;</span>
            <h2>🔑 Simular Locação</h2>
            
            <form id="locacaoForm">
                <div class="form-group">
                    <label for="clienteLocacao">Cliente:</label>
                    <select id="clienteLocacao" required>
                        <option value="">Selecione um cliente</option>
                    </select>
                </div>
                
                <div class="form-group">
                    <label for="diasLocacao">Número de Dias:</label>
                    <input type="number" id="diasLocacao" required min="1" value="1">
                </div>
                
                <div class="form-group">
                    <label>Veículo Selecionado:</label>
                    <p id="veiculoSelecionado"></p>
                </div>
                
                <div class="form-group">
                    <label>Valor Total:</label>
                    <p id="valorTotal">R$ 0,00</p>
                </div>
                
                <button type="submit" class="btn">✅ Confirmar Locação</button>
                <button type="button" class="btn btn-secondary" onclick="fecharModal()">❌ Cancelar</button>
            </form>
        </div>
    </div>

    <script>
        // Arrays para armazenar dados (simulando banco de dados)
        let clientes = [];
        let veiculos = [];
        let locacoes = [];

        // Dados de exemplo
        clientes.push({
            nome: "João Silva",
            cpf: "123.456.789-00",
            email: "joao@email.com",
            telefone: "(11) 99999-9999",
            endereco: "Rua das Flores, 123",
            cnh: "12345678900"
        });

        veiculos.push(
            {
                id: 1,
                marca: "Toyota",
                modelo: "Corolla",
                ano: 2022,
                cor: "Prata",
                placa: "ABC-1234",
                tipo: "sedan",
                valorDiaria: 120.00,
                status: "disponivel"
            },
            {
                id: 2,
                marca: "Honda",
                modelo: "Civic",
                ano: 2021,
                cor: "Preto",
                placa: "DEF-5678",
                tipo: "sedan",
                valorDiaria: 110.00,
                status: "alugado",
                clienteLocacao: "João Silva"
            }
        );

        let proximoIdVeiculo = 3;
        let veiculoSelecionadoId = null;

        // Funções de navegação
        function showSection(sectionId) {
            // Remove active de todas as seções e botões
            document.querySelectorAll('.section').forEach(section => {
                section.classList.remove('active');
            });
            document.querySelectorAll('.nav-btn').forEach(btn => {
                btn.classList.remove('active');
            });

            // Adiciona active na seção e botão selecionados
            document.getElementById(sectionId).classList.add('active');
            event.target.classList.add('active');

            // Atualiza conteúdo específico da seção
            if (sectionId === 'frota') {
                exibirVeiculos();
            } else if (sectionId === 'dashboard') {
                atualizarDashboard();
            }
        }

        // Formatação de campos
        document.getElementById('cpfCliente').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = value.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/, '$1.$2.$3-$4');
            e.target.value = value;
        });

        document.getElementById('telefoneCliente').addEventListener('input', function(e) {
            let value = e.target.value.replace(/\D/g, '');
            value = value.replace(/(\d{2})(\d{5})(\d{4})/, '($1) $2-$3');
            e.target.value = value;
        });

        document.getElementById('placaVeiculo').addEventListener('input', function(e) {
            let value = e.target.value.toUpperCase().replace(/[^A-Z0-9]/g, '');
            if (value.length > 3) {
                value = value.replace(/(\w{3})(\w{4})/, '$1-$2');
            }
            e.target.value = value;
        });

        // Cadastro de clientes
        document.getElementById('clienteForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const cliente = {
                nome: document.getElementById('nomeCliente').value,
                cpf: document.getElementById('cpfCliente').value,
                email: document.getElementById('emailCliente').value,
                telefone: document.getElementById('telefoneCliente').value,
                endereco: document.getElementById('enderecoCliente').value,
                cnh: document.getElementById('cnhCliente').value
            };

            // Verificar se CPF já existe
            if (clientes.some(c => c.cpf === cliente.cpf)) {
                mostrarAlerta('error', 'CPF já cadastrado!');
                return;
            }

            clientes.push(cliente);
            mostrarAlerta('success', 'Cliente cadastrado com sucesso!');
            limparFormularioCliente();
            atualizarSelectClientes();
            atualizarDashboard();
        });

        // Cadastro de veículos
        document.getElementById('veiculoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const veiculo = {
                id: proximoIdVeiculo++,
                marca: document.getElementById('marcaVeiculo').value,
                modelo: document.getElementById('modeloVeiculo').value,
                ano: parseInt(document.getElementById('anoVeiculo').value),
                cor: document.getElementById('corVeiculo').value,
                placa: document.getElementById('placaVeiculo').value,
                tipo: document.getElementById('tipoVeiculo').value,
                valorDiaria: parseFloat(document.getElementById('valorDiaria').value),
                status: 'disponivel'
            };

            // Verificar se placa já existe
            if (veiculos.some(v => v.placa === veiculo.placa)) {
                mostrarAlerta('error', 'Placa já cadastrada!');
                return;
            }

            veiculos.push(veiculo);
            mostrarAlerta('success', 'Veículo cadastrado com sucesso!');
            limparFormularioVeiculo();
            atualizarDashboard();
        });

        // Locação
        document.getElementById('locacaoForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const clienteNome = document.getElementById('clienteLocacao').value;
            const dias = parseInt(document.getElementById('diasLocacao').value);
            
            if (!clienteNome) {
                mostrarAlerta('error', 'Por favor, selecione um cliente!');
                return;
            }
            
            if (!dias || dias < 1) {
                mostrarAlerta('error', 'Por favor, informe um número válido de dias!');
                return;
            }
            
            // Encontrar o veículo e atualizá-lo
            const veiculo = veiculos.find(v => v.id === veiculoSelecionadoId);
            if (veiculo && veiculo.status === 'disponivel') {
                veiculo.status = 'alugado';
                veiculo.clienteLocacao = clienteNome;
                
                const locacao = {
                    clienteNome: clienteNome,
                    veiculoId: veiculoSelecionadoId,
                    dias: dias,
                    valorTotal: veiculo.valorDiaria * dias,
                    dataLocacao: new Date(),
                    ativa: true
                };
                
                locacoes.push(locacao);
                mostrarAlerta('success', `Locação realizada com sucesso! Valor: R$ ${(veiculo.valorDiaria * dias).toFixed(2).replace('.', ',')}`);
                fecharModal();
                exibirVeiculos();
                atualizarDashboard();
            } else {
                mostrarAlerta('error', 'Erro ao processar locação. Veículo pode não estar disponível.');
            }
        });

        // Atualização do valor total na locação
        document.getElementById('diasLocacao').addEventListener('input', function() {
            const dias = parseInt(this.value) || 0;
            const veiculo = veiculos.find(v => v.id === veiculoSelecionadoId);
            if (veiculo && dias > 0) {
                const valorTotal = veiculo.valorDiaria * dias;
                document.getElementById('valorTotal').textContent = `R$ ${valorTotal.toFixed(2).replace('.', ',')}`;
            } else {
                document.getElementById('valorTotal').textContent = 'R$ 0,00';
            }
        });

        // Funções auxiliares
        function limparFormularioCliente() {
            document.getElementById('clienteForm').reset();
        }

        function limparFormularioVeiculo() {
            document.getElementById('veiculoForm').reset();
        }

        function mostrarAlerta(tipo, mensagem) {
            const alerta = document.createElement('div');
            alerta.className = `alert alert-${tipo}`;
            alerta.textContent = mensagem;
            
            const container = document.querySelector('.container');
            container.insertBefore(alerta, container.firstChild);
            
            setTimeout(() => {
                alerta.remove();
            }, 5000);
        }

        function exibirVeiculos() {
            const lista = document.getElementById('listaVeiculos');
            const filtro = document.getElementById('filtroStatus').value;
            
            let veiculosFiltrados = veiculos;
            if (filtro) {
                veiculosFiltrados = veiculos.filter(v => v.status === filtro);
            }
            
            lista.innerHTML = '';
            
            if (veiculosFiltrados.length === 0) {
                lista.innerHTML = '<p style="text-align: center; color: #6b7280; font-size: 1.1em;">Nenhum veículo encontrado.</p>';
                return;
            }
            
            veiculosFiltrados.forEach(veiculo => {
                const card = document.createElement('div');
                card.className = `vehicle-card ${veiculo.status}`;
                
                card.innerHTML = `
                    <div class="vehicle-status status-${veiculo.status}">
                        ${veiculo.status === 'disponivel' ? 'Disponível' : 'Alugado'}
                    </div>
                    <div class="vehicle-info">
                        <h3>${veiculo.marca} ${veiculo.modelo}</h3>
                        <div class="vehicle-details">
                            <p><strong>Ano:</strong> ${veiculo.ano}</p>
                            <p><strong>Cor:</strong> ${veiculo.cor}</p>
                            <p><strong>Placa:</strong> ${veiculo.placa}</p>
                            <p><strong>Tipo:</strong> ${veiculo.tipo}</p>
                            <p><strong>Diária:</strong> R$ ${veiculo.valorDiaria.toFixed(2)}</p>
                            ${veiculo.status === 'alugado' ? `<p><strong>Cliente:</strong> ${veiculo.clienteLocacao}</p>` : ''}
                        </div>
                    </div>
                    ${veiculo.status === 'disponivel' ? 
                        `<button class="btn" onclick="abrirModalLocacao(${veiculo.id})">🔑 Alugar</button>` :
                        `<button class="btn btn-secondary" onclick="devolverVeiculo(${veiculo.id})">↩️ Devolver</button>`
                    }
                `;
                
                lista.appendChild(card);
            });
        }

        function filtrarVeiculos() {
            exibirVeiculos();
        }

        function abrirModalLocacao(veiculoId) {
            veiculoSelecionadoId = veiculoId;
            const veiculo = veiculos.find(v => v.id === veiculoId);
            
            if (veiculo && veiculo.status === 'disponivel') {
                document.getElementById('veiculoSelecionado').textContent = 
                    `${veiculo.marca} ${veiculo.modelo} - ${veiculo.placa}`;
                document.getElementById('valorTotal').textContent = `R$ ${veiculo.valorDiaria.toFixed(2).replace('.', ',')}`;
                document.getElementById('diasLocacao').value = 1;
                
                // Limpar seleção anterior
                document.getElementById('clienteLocacao').value = '';
                
                atualizarSelectClientes();
                document.getElementById('modalLocacao').style.display = 'block';
            } else {
                mostrarAlerta('error', 'Este veículo não está disponível para locação.');
            }
        }

        function fecharModal() {
            document.getElementById('modalLocacao').style.display = 'none';
            document.getElementById('locacaoForm').reset();
            veiculoSelecionadoId = null;
        }

        function devolverVeiculo(veiculoId) {
            const veiculo = veiculos.find(v => v.id === veiculoId);
            if (veiculo && veiculo.status === 'alugado') {
                if (confirm(`Confirmar devolução do veículo ${veiculo.marca} ${veiculo.modelo} - ${veiculo.placa}?`)) {
                    veiculo.status = 'disponivel';
                    delete veiculo.clienteLocacao;
                    
                    // Finalizar locação ativa
                    const locacaoAtiva = locacoes.find(l => l.veiculoId === veiculoId && l.ativa !== false);
                    if (locacaoAtiva) {
                        locacaoAtiva.ativa = false;
                        locacaoAtiva.dataDevolucao = new Date();
                    }
                    
                    mostrarAlerta('success', 'Veículo devolvido com sucesso!');
                    exibirVeiculos();
                    atualizarDashboard();
                }
            } else {
                mostrarAlerta('error', 'Erro ao processar devolução. Veículo pode não estar alugado.');
            }
        }

        function atualizarSelectClientes() {
            const select = document.getElementById('clienteLocacao');
            select.innerHTML = '<option value="">Selecione um cliente</option>';
            
            clientes.forEach(cliente => {
                const option = document.createElement('option');
                option.value = cliente.nome;
                option.textContent = `${cliente.nome} - ${cliente.cpf}`;
                select.appendChild(option);
            });
        }

        function atualizarDashboard() {
            const totalVeiculos = veiculos.length;
            const veiculosDisponiveis = veiculos.filter(v => v.status === 'disponivel').length;
            const veiculosAlugados = veiculos.filter(v => v.status === 'alugado').length;
            const totalClientes = clientes.length;

            document.getElementById('totalVeiculos').textContent = totalVeiculos;
            document.getElementById('veiculosDisponiveis').textContent = veiculosDisponiveis;
            document.getElementById('veiculosAlugados').textContent = veiculosAlugados;
            document.getElementById('totalClientes').textContent = totalClientes;
        }

        // Fechar modal ao clicar fora dele
        window.onclick = function(event) {
            const modal = document.getElementById('modalLocacao');
            if (event.target === modal) {
                fecharModal();
            }
        }

        // Inicialização
        document.addEventListener('DOMContentLoaded', function() {
            atualizarDashboard();
            atualizarSelectClientes();
        });
    </script>
</body>
</html>